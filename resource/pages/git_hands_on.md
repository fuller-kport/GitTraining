# 実践Git!
最後に実際にGitを使ったバージョン管理をしてみましょう．

---
# 何をするだぁーッ!!
C言語のプログラムを管理します．

Gitはテキストデータの管理が得意なので文章の管理とかも出来ますが，今回はCプログラムです．
なぜCプログラムかというと，これからGitを使うケースに近いと思ったからです．

---
# 下準備
Gitで管理する場所をつくります．

ディレクトリを作ってその中に移動します．
分かる人は好きに作って下さい．

例では```gitHnadsOn```という名前のディレクトリを作るので，適宜読み替えてください．
基本的にファイルやディレクトリ名は自由に決めても構いません．

### 管理対象のディレクトリを作る
任意の場所に管理対象のディレクトリを作ります．

例としてホームディレクトリに作ります．

以下のコマンドでホームディレクトリへ移動します．
```
cd ~
```

移動した後，ディレクトリを作ります．
```
mkdir gitHandsOn
```
ちなみに次の1つ目のコマンドで自分がいるディレクトリがわかります．
2つ目のコマンドでは自分がいるディレクトリの中身が一覧表示出来ます．
覚えてください．
```
pwd
ls -a
```

### 管理対象のディレクトリの中に入る．
はい 次のコマンドです．
```
cd gitHandsOn 
```

---
# Gitを使ってCプログラムを管理する

## Gitの管理下に置く
gitHandsOnをGitの管理下に置きます．
用語を使うなら，リポジトリの作成です．

```
git init
```
このコマンドはgitのリポジトリを作るためのコマンドです．
実行すると```.git```というファイルが作られます．
これはgitが情報をためておくためのフォルダです．

リポジトリを作るその前に…ちょっと```ls -a```でディレクトリの中身を見てください．
```.```と ```..```だけが表示されますね．
この点もディレクトリで，それぞれ今いるディレクトリと一つ前のディレクトリを表しています．
つまりディレクトリの中には今は何もありません．

さて，実際にリポジトリを作って見ましょう．

```git init```コマンドは，今いるディレクトリをgitの管理下に置きます．
なので，gitHandsOnの中に移動してからコマンドをうって下さい．

そして…ディレクトリの中身を見てみると```.git```というファイルが出来ている事が確認できます!

はい!これでこのディレクトリがGitの管理下に置かれました．

---
## ファイルを追加しよう!
いよいよプログラムを書いていきます．
```main.c```という名前のファイルを好きなテキストエディタ~~vimだよね??~~でgitHandsOnの中に作って下さい．

そして次の内容を中身にコピペしてください．

メッセージを出力するだけのプログラムです．
```
# include <stdio.h>

int main(void){
	printf("Cook a Doodle Do!");
	return 0;
}
```

---
## gitで記録する
gitに履歴を残す為には次の2ステップが必要です．

### gitに記録するファイルを決める
gitに記録するファイルを決めます．用語を使うなら，indexへの登録です．
```
git add ［オプション]
```
indexとはgitに記録するファイルを入れておく場所です．indexに入っているものだけが次のステップで
記録されます．

オプションに何を指定するかで動作が変わります．よく使うのはこんな感じです．

git管理下の全てのファイルやフォルダをindexに登録します．
```
git add --all
```

ファイル名やフォルダ名を指定してindexに登録します．
```
git add［ファイルorフォルダ名］
```

やり方が分かったので```main.c```をindexに登録してみましょう．

ちなみにファイルの登録状況は次のコマンドでわかります．確かめて見てください．
```
git status
```

### 履歴を残す
indexに登録されているファイル，フォルダをリポジトリに記録します．
用語を使うなら，［コミットをする］です．
```
git commit ［オプション］
```

オプションには色々ありますが，よく使うのは次の形式です．
```
git commit -m "［コミットメッセージ］"
```

このオプションは，```-m```の後に書いたメッセージを一緒に記録します．
この記録がどんな時点のものなのかを簡潔に表すメッセージを書いておくと後々便利です．
これが最初なので```-m "first commit"```とかでいいでしょう．

ちなみにメッセージを間違えてしまった場合は，次のコマンドで修正出来ます．
```
git commit -amend
```


さて，やり方がわかったのでコミットしてみましょう．

ちなみにcommitの記録は以下のコマンドで確認出来ます．
```
git log
```

---
## 枝分かれさせよう!

ブランチを作り，開発の流れを分岐させます．

突然ですが，あなたはこのプログラムを公開したくなりました．安定して動作するプログラムを公開したまま開発を続けるには
どうしたらいいでしょう．

こんな時にはブランチ(branch)を使います．

TODO: branchの解説(画像付き)

ブランチのリストは次のコマンドで確認できます．
```
git branch
```

```* master```と表示されているのが確認出来ます．
```*```がついているところが今自分がいるブランチです．

開発の流れをここから別れさせようと思います．
masterは公開用に使う事にして，開発用のブランチを作ります．
そうですね…開発用のブランチの名前はdevelopにすることにします．

以下のコマンドで新しくブランチを作り，作ったブランチへ移動します．

```
git checkout -b "［ブランチ名］"
```

ではdevelopブランチを作ってください．

終わったら```git branch```で各自確認してみましょう．

---
## ここまでの復習

ファイルを編集，indexに登録，コミットの一連の流れがgitの基本です．

ファイルを少し書き換えてコミットまでの流れを復習してみましょう．
そうですねぇ…

```main.c```の```printf()```の行の下，```return```の行の前に次の行を追記して見ましょう．
```
int a = 23;
```


後は読み返したりしながらコミットまでやって下さい．
ただし，このコミットはdevelopブランチに対して行ってください．

ちなみにコミットは今居るブランチに対して行われます．

---
## 枝をくっつけよう!
さっき分けたdevelopブランチをmasterブランチにくっつけます．
くっつけることをマージ(merge)と呼びます．

masterブランチがマージ先，developブランチがマージ元です．
マージ先に指定した方が変更される側です．





